var e=async function e(t){const n="https://en.wikipedia.org/w/api.php?"+new URLSearchParams({origin:"*",action:"parse",page:t,format:"json",prop:"wikitext"}),a=await fetch(n),o=await a.json();if(!o.parse)return null;const r=o.parse.wikitext["*"],c=function(e){const t=/#REDIRECT.+\[\[(.+)]]/.exec(e);return null!==t?t[1]:null}(r);return null!==c?e(c):r};var t=async function(e){if(e in localStorage){const t=localStorage.getItem(e);return""===t?null:t}const t={action:"query",titles:e,prop:"langlinks",format:"json",lllang:"ja"};let n="https://en.wikipedia.org/w/api.php?origin=*";Object.keys(t).forEach((function(e){n+="&"+e+"="+t[e]}));const a=await fetch(n),o=await a.json();if(!("pages"in o.query))return localStorage.setItem(e,""),null;const r=parseInt(Object.keys(o.query.pages)[0]),c=o.query.pages[r].langlinks;if(!c)return localStorage.setItem(e,""),null;const i=c[0]["*"];return localStorage.setItem(e,i),i};async function n(e){let n=e;const a=function(e){return[...new Set([...e.matchAll(/\[\[(.+?)]]/g)].map((e=>e[1]))).keys()].map((e=>e.split("|"))).filter((e=>e.length<=2))}(e);for(const[e,o]of a){if(o)continue;const a=await t(e),r=new RegExp(String.raw`\[\[${e}]]`,"g"),c=null===a?`{{ill|${e}|en|${e}}}`:`[[${a}]]`;n=n.replace(r,c)}return n}async function a(){const n=document.querySelector("#article-name").value,a=await t(n);document.querySelector("#langlink").value=`${n} => ${a??"not found"}`;const o=await e(n);document.querySelector("#wikitext").value=o??"not found"}async function o(){const e=document.querySelector("#wikitext").value,t=await n(e);document.querySelector("#replaced-wikitext").value=t}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector("#article-name").addEventListener("keydown",(e=>{"Enter"===e.key&&a()}));document.querySelector("button#fetch").addEventListener("click",a);document.querySelector("button#convert").addEventListener("click",o)}));
//# sourceMappingURL=index.8a941837.js.map
